<div class="container">
  <div class="row align-items-center">
    <h1 class="my-3">Meetings</h1>
    <button class="btn btn-outline-secondary ml-3" (click)="openForm()">
      Novo +
    </button>
  </div>
  <form class="row align-items-end" (submit)="submitFilters()">
    <div class="form-group mr-2 col-4">
      <label for="search">Search</label>
      <div class="input-group">
        <div class="input-group-prepend">
          <div class="input-group-text">
            <img src="/assets/icons/search.svg" alt="" />
          </div>
        </div>
        <input
          class="form-control"
          name="search"
          aria-describedby="searchHelp"
          [(ngModel)]="meetingQuery.search"
        />
      </div>
    </div>
    <div class="form-group mr-2 col-3">
      <label for="status">Status</label>
      <select
        name="status"
        class="form-control"
        [(ngModel)]="meetingQuery.status"
      >
        <option value="All" selected>All</option>
        <option value="Open">Open</option>
        <option value="Closed">Closed</option>
      </select>
    </div>
    <button type="submit" class="btn btn-primary mb-3">Search</button>
  </form>
  <table class="table table-striped">
    <thead>
      <tr>
        <th scope="col">Date</th>
        <th scope="col">Subjects</th>
        <th scope="col">Description</th>
        <th scope="col">Status</th>
      </tr>
    </thead>
    <tbody>
      <ng-container
        *ngIf="meetings == null || meetings.isInProgress; else hasData"
      >
        <tr>
          <td colspan="4" class="position-relative" style="height: 200px">
            <app-spinner></app-spinner>
          </td>
        </tr>
      </ng-container>
      <ng-template #hasData>
        <ng-container *ngIf="meetings.isFailure">erro...</ng-container>
        <ng-container *ngIf="meetings.isSuccess">
          <tr
            *ngFor="let meeting of meetings.data"
            (click)="onMeetingClick(meeting)"
          >
            <td>{{ meeting.date | date: "dd/MM/yyyy" }}</td>
            <td>
              {{ meeting.subjects.length }}
            </td>
            <td>{{ meeting.description }}</td>
            <td>
              <span
                class="badge"
                [ngClass]="
                  meeting.status === 'Open' ? 'badge-warning' : 'badge-danger'
                "
                >{{ meeting.status }}</span
              >
            </td>
          </tr>
        </ng-container>
      </ng-template>
    </tbody>
  </table>
  <ngb-pagination
    [page]="meetingQuery.page"
    (pageChange)="changePage($event)"
    [pageSize]="10"
    [collectionSize]="100"
  ></ngb-pagination>
</div>
<!-- <app-meetings-form></app-meetings-form> -->
